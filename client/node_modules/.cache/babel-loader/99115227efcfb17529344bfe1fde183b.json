{"ast":null,"code":"var _jsxFileName = \"/Users/jidesh/Documents/instaclone/client/src/components/UsersList/UsersList.js\";\nimport React, { useEffect, useReducer, useRef } from 'react';\nimport { retrieveUserFollowing, retrieveUserFollowers } from '../../services/profileService';\nimport useScrollPositionThrottled from '../../hooks/useScrollPositionThrottled';\nimport { usersListReducer, INITIAL_STATE } from './usersListReducer';\nimport UserCard from '../UserCard/UserCard';\nimport UsersListSkeleton from './UsersListSkeleton/UsersListSkeleton';\nimport Icon from '../Icon/Icon';\nimport FollowButton from '../Button/FollowButton/FollowButton';\n\nconst UsersList = ({\n  userId,\n  token,\n  followingCount,\n  followersCount,\n  following\n}) => {\n  const [state, dispatch] = useReducer(usersListReducer, INITIAL_STATE);\n  const componentRef = useRef();\n  useScrollPositionThrottled(async ({\n    atBottom\n  }) => {\n    const count = followingCount ? followingCount : followersCount;\n\n    if (atBottom && state.data.length < count && !state.fetching && !state.fetchingAdditional) {\n      try {\n        dispatch({\n          type: 'FETCH_ADDITIONAL_START'\n        });\n        const response = following ? await retrieveUserFollowing(userId, state.data.length, token) : await retrieveUserFollowers(userId, state.data.length, token);\n        dispatch({\n          type: 'ADD_USERS',\n          payload: response\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAILURE',\n          payload: err\n        });\n      }\n    }\n  }, componentRef.current);\n  const stateRef = useRef(state.data).current;\n  const followingRef = useRef(following).current;\n  useEffect(() => {\n    (async function () {\n      try {\n        dispatch({\n          type: 'FETCH_START'\n        });\n        const response = followingRef ? await retrieveUserFollowing(userId, stateRef ? stateRef.length : 0, token) : await retrieveUserFollowers(userId, stateRef ? stateRef.length : 0, token);\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: response\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAILURE',\n          payload: err\n        });\n      }\n    })();\n  }, [userId, token, stateRef, followingRef]);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"following-overview\",\n    ref: componentRef,\n    style: {\n      overflowY: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, !followersCount && !followingCount ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '2rem',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    style: {\n      margin: '0 auto'\n    },\n    className: \"icon--larger\",\n    icon: \"person-add-outline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"heading-2 font-thin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, following ? 'People the user follows' : 'People who follow the user'), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"heading-4 font-medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, following ? \"Once the user follows somebody, you'll see them here.\" : \"Once somebody follows the user, you'll see them here\")) : state.fetching ? /*#__PURE__*/React.createElement(UsersListSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }) : state.data.map((user, idx) => /*#__PURE__*/React.createElement(UserCard, {\n    key: idx,\n    avatar: user.avatar,\n    username: user.username,\n    subText: user.fullName,\n    userId: user._id,\n    following: user.isFollowing,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FollowButton, {\n    userId: user._id,\n    following: user.isFollowing,\n    username: user.username,\n    avatar: user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))), state.fetchingAdditional && /*#__PURE__*/React.createElement(UsersListSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 36\n    }\n  }));\n};\n\nexport default UsersList;","map":{"version":3,"sources":["/Users/jidesh/Documents/instaclone/client/src/components/UsersList/UsersList.js"],"names":["React","useEffect","useReducer","useRef","retrieveUserFollowing","retrieveUserFollowers","useScrollPositionThrottled","usersListReducer","INITIAL_STATE","UserCard","UsersListSkeleton","Icon","FollowButton","UsersList","userId","token","followingCount","followersCount","following","state","dispatch","componentRef","atBottom","count","data","length","fetching","fetchingAdditional","type","response","payload","err","current","stateRef","followingRef","overflowY","padding","textAlign","margin","map","user","idx","avatar","username","fullName","_id","isFollowing"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer, useRef } from 'react';\n\nimport {\n  retrieveUserFollowing,\n  retrieveUserFollowers,\n} from '../../services/profileService';\n\nimport useScrollPositionThrottled from '../../hooks/useScrollPositionThrottled';\n\nimport { usersListReducer, INITIAL_STATE } from './usersListReducer';\n\nimport UserCard from '../UserCard/UserCard';\nimport UsersListSkeleton from './UsersListSkeleton/UsersListSkeleton';\nimport Icon from '../Icon/Icon';\nimport FollowButton from '../Button/FollowButton/FollowButton';\n\nconst UsersList = ({\n  userId,\n  token,\n  followingCount,\n  followersCount,\n  following,\n}) => {\n  const [state, dispatch] = useReducer(usersListReducer, INITIAL_STATE);\n  const componentRef = useRef();\n\n  useScrollPositionThrottled(async ({ atBottom }) => {\n    const count = followingCount ? followingCount : followersCount;\n    if (\n      atBottom &&\n      state.data.length < count &&\n      !state.fetching &&\n      !state.fetchingAdditional\n    ) {\n      try {\n        dispatch({ type: 'FETCH_ADDITIONAL_START' });\n        const response = following\n          ? await retrieveUserFollowing(userId, state.data.length, token)\n          : await retrieveUserFollowers(userId, state.data.length, token);\n        dispatch({ type: 'ADD_USERS', payload: response });\n      } catch (err) {\n        dispatch({ type: 'FETCH_FAILURE', payload: err });\n      }\n    }\n  }, componentRef.current);\n\n  const stateRef = useRef(state.data).current;\n  const followingRef = useRef(following).current;\n\n  useEffect(() => {\n    (async function () {\n      try {\n        dispatch({ type: 'FETCH_START' });\n        const response = followingRef\n          ? await retrieveUserFollowing(\n              userId,\n              stateRef ? stateRef.length : 0,\n              token\n            )\n          : await retrieveUserFollowers(\n              userId,\n              stateRef ? stateRef.length : 0,\n              token\n            );\n        dispatch({ type: 'FETCH_SUCCESS', payload: response });\n      } catch (err) {\n        dispatch({ type: 'FETCH_FAILURE', payload: err });\n      }\n    })();\n  }, [userId, token, stateRef, followingRef]);\n\n  return (\n    <section\n      className=\"following-overview\"\n      ref={componentRef}\n      style={{ overflowY: 'auto' }}\n    >\n      {!followersCount && !followingCount ? (\n        <div style={{ padding: '2rem', textAlign: 'center' }}>\n          <Icon\n            style={{ margin: '0 auto' }}\n            className=\"icon--larger\"\n            icon=\"person-add-outline\"\n          />\n          <h2 className=\"heading-2 font-thin\">\n            {following\n              ? 'People the user follows'\n              : 'People who follow the user'}\n          </h2>\n          <h4 className=\"heading-4 font-medium\">\n            {following\n              ? \"Once the user follows somebody, you'll see them here.\"\n              : \"Once somebody follows the user, you'll see them here\"}\n          </h4>\n        </div>\n      ) : state.fetching ? (\n        <UsersListSkeleton />\n      ) : (\n        state.data.map((user, idx) => (\n          <UserCard\n            key={idx}\n            avatar={user.avatar}\n            username={user.username}\n            subText={user.fullName}\n            userId={user._id}\n            following={user.isFollowing}\n          >\n            <FollowButton\n              userId={user._id}\n              following={user.isFollowing}\n              username={user.username}\n              avatar={user.avatar}\n            />\n          </UserCard>\n        ))\n      )}\n      {state.fetchingAdditional && <UsersListSkeleton />}\n    </section>\n  );\n};\n\nexport default UsersList;\n"]},"metadata":{},"sourceType":"module"}