{"ast":null,"code":"var _jsxFileName = \"/Users/jidesh/Documents/instaclone/client/src/pages/ConfirmationPage/ConfirmationPage.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { showModal } from '../../redux/modal/modalActions';\nimport { selectToken } from '../../redux/user/userSelectors';\nimport { confirmUser } from '../../services/userService';\nimport Loader from '../../components/Loader/Loader';\n\nconst VerificationPage = ({\n  authToken,\n  showModal\n}) => {\n  const history = useHistory();\n  const {\n    token\n  } = useParams();\n  useEffect(() => {\n    if (!authToken) {\n      return history.push('/');\n    }\n\n    (async function () {\n      let children = null;\n\n      try {\n        await confirmUser(authToken, token);\n        children = /*#__PURE__*/React.createElement(\"h3\", {\n          style: {\n            padding: '2rem'\n          },\n          className: \"heading-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 11\n          }\n        }, \"Successfully confirmed your email.\");\n      } catch (err) {\n        children = /*#__PURE__*/React.createElement(\"h3\", {\n          style: {\n            padding: '2rem'\n          },\n          className: \"heading-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 11\n          }\n        }, \"Invalid or expired confirmation link.\");\n      }\n\n      showModal({\n        options: [],\n        title: 'Confirmation',\n        cancelButton: false,\n        children\n      }, 'OptionsDialog/OptionsDialog');\n      return history.push('/');\n    })();\n  }, [authToken, history, showModal, token]);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"verification-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  authToken: selectToken\n});\n\nconst mapDispatchToProps = dispatch => ({\n  showModal: (props, component) => dispatch(showModal(props, component))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VerificationPage);","map":{"version":3,"sources":["/Users/jidesh/Documents/instaclone/client/src/pages/ConfirmationPage/ConfirmationPage.js"],"names":["React","useEffect","connect","createStructuredSelector","useHistory","useParams","showModal","selectToken","confirmUser","Loader","VerificationPage","authToken","history","token","push","children","padding","err","options","title","cancelButton","mapStateToProps","mapDispatchToProps","dispatch","props","component"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AAEA,SAASC,SAAT,QAA0B,gCAA1B;AACA,SAASC,WAAT,QAA4B,gCAA5B;AAEA,SAASC,WAAT,QAA4B,4BAA5B;AAEA,OAAOC,MAAP,MAAmB,gCAAnB;;AAEA,MAAMC,gBAAgB,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaL,EAAAA;AAAb,CAAD,KAA8B;AACrD,QAAMM,OAAO,GAAGR,UAAU,EAA1B;AACA,QAAM;AAAES,IAAAA;AAAF,MAAYR,SAAS,EAA3B;AACAJ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACU,SAAL,EAAgB;AACd,aAAOC,OAAO,CAACE,IAAR,CAAa,GAAb,CAAP;AACD;;AACD,KAAC,kBAAkB;AACjB,UAAIC,QAAQ,GAAG,IAAf;;AACA,UAAI;AACF,cAAMP,WAAW,CAACG,SAAD,EAAYE,KAAZ,CAAjB;AACAE,QAAAA,QAAQ,gBACN;AAAI,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAX;AAAgC,UAAA,SAAS,EAAC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADF;AAKD,OAPD,CAOE,OAAOC,GAAP,EAAY;AACZF,QAAAA,QAAQ,gBACN;AAAI,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAX;AAAgC,UAAA,SAAS,EAAC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDADF;AAKD;;AACDV,MAAAA,SAAS,CACP;AACEY,QAAAA,OAAO,EAAE,EADX;AAEEC,QAAAA,KAAK,EAAE,cAFT;AAGEC,QAAAA,YAAY,EAAE,KAHhB;AAIEL,QAAAA;AAJF,OADO,EAOP,6BAPO,CAAT;AASA,aAAOH,OAAO,CAACE,IAAR,CAAa,GAAb,CAAP;AACD,KA1BD;AA2BD,GA/BQ,EA+BN,CAACH,SAAD,EAAYC,OAAZ,EAAqBN,SAArB,EAAgCO,KAAhC,CA/BM,CAAT;AAiCA,sBACE;AAAM,IAAA,SAAS,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD,CAzCD;;AA2CA,MAAMQ,eAAe,GAAGlB,wBAAwB,CAAC;AAC/CQ,EAAAA,SAAS,EAAEJ;AADoC,CAAD,CAAhD;;AAIA,MAAMe,kBAAkB,GAAIC,QAAD,KAAe;AACxCjB,EAAAA,SAAS,EAAE,CAACkB,KAAD,EAAQC,SAAR,KAAsBF,QAAQ,CAACjB,SAAS,CAACkB,KAAD,EAAQC,SAAR,CAAV;AADD,CAAf,CAA3B;;AAIA,eAAevB,OAAO,CAACmB,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CZ,gBAA7C,CAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { showModal } from '../../redux/modal/modalActions';\nimport { selectToken } from '../../redux/user/userSelectors';\n\nimport { confirmUser } from '../../services/userService';\n\nimport Loader from '../../components/Loader/Loader';\n\nconst VerificationPage = ({ authToken, showModal }) => {\n  const history = useHistory();\n  const { token } = useParams();\n  useEffect(() => {\n    if (!authToken) {\n      return history.push('/');\n    }\n    (async function () {\n      let children = null;\n      try {\n        await confirmUser(authToken, token);\n        children = (\n          <h3 style={{ padding: '2rem' }} className=\"heading-3\">\n            Successfully confirmed your email.\n          </h3>\n        );\n      } catch (err) {\n        children = (\n          <h3 style={{ padding: '2rem' }} className=\"heading-3\">\n            Invalid or expired confirmation link.\n          </h3>\n        );\n      }\n      showModal(\n        {\n          options: [],\n          title: 'Confirmation',\n          cancelButton: false,\n          children,\n        },\n        'OptionsDialog/OptionsDialog'\n      );\n      return history.push('/');\n    })();\n  }, [authToken, history, showModal, token]);\n\n  return (\n    <main className=\"verification-page\">\n      <Loader />\n    </main>\n  );\n};\n\nconst mapStateToProps = createStructuredSelector({\n  authToken: selectToken,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  showModal: (props, component) => dispatch(showModal(props, component)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VerificationPage);\n"]},"metadata":{},"sourceType":"module"}