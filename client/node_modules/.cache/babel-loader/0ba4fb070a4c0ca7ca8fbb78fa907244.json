{"ast":null,"code":"var _jsxFileName = \"/Users/jidesh/Documents/instaclone/client/src/pages/HomePage/HomePage.js\";\nimport React, { useEffect, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser, selectToken } from '../../redux/user/userSelectors';\nimport { selectFeedPosts, selectHasMore, selectFeedFetching } from '../../redux/feed/feedSelectors';\nimport { fetchFeedPostsStart, clearPosts } from '../../redux/feed/feedActions';\nimport useScrollPositionThrottled from '../../hooks/useScrollPositionThrottled';\nimport Feed from '../../components/Feed/Feed';\nimport UserCard from '../../components/UserCard/UserCard';\nimport SmallFooter from '../../components/Footer/SmallFooter/SmallFooter';\nimport MobileHeader from '../../components/Header/MobileHeader/MobileHeader';\nimport Icon from '../../components/Icon/Icon';\nimport NewPostButton from '../../components/NewPost/NewPostButton/NewPostButton';\nimport SuggestedUsers from '../../components/Suggestion/SuggestedUsers/SuggestedUsers';\n\nconst HomePage = ({\n  currentUser,\n  fetchFeedPostsStart,\n  clearPosts,\n  token,\n  feedPosts,\n  hasMore,\n  fetching\n}) => {\n  useEffect(() => {\n    document.title = `Instaclone`;\n    fetchFeedPostsStart(token);\n    return () => {\n      clearPosts();\n    };\n  }, [clearPosts, fetchFeedPostsStart, token]);\n  useScrollPositionThrottled(({\n    atBottom\n  }) => {\n    if (atBottom && hasMore && !fetching) {\n      fetchFeedPostsStart(token, feedPosts.length);\n    }\n  }, null, [hasMore, fetching]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MobileHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NewPostButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontSize: '2.5rem'\n    },\n    className: \"heading-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Instaclone\"), /*#__PURE__*/React.createElement(Icon, {\n    icon: \"paper-plane-outline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"main\", {\n    \"data-test\": \"page-home\",\n    className: \"home-page grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, !fetching && feedPosts.length === 0 ? /*#__PURE__*/React.createElement(SuggestedUsers, {\n    card: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Feed, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(UserCard, {\n    avatar: currentUser.avatar,\n    username: currentUser.username,\n    subText: currentUser.fullName,\n    style: {\n      padding: '0'\n    },\n    avatarMedium: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(SuggestedUsers, {\n    max: 5,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(SmallFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }))))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  token: selectToken,\n  feedPosts: selectFeedPosts,\n  hasMore: selectHasMore,\n  fetching: selectFeedFetching\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchFeedPostsStart: (authToken, offset) => dispatch(fetchFeedPostsStart(authToken, offset)),\n  clearPosts: () => dispatch(clearPosts())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);","map":{"version":3,"sources":["/Users/jidesh/Documents/instaclone/client/src/pages/HomePage/HomePage.js"],"names":["React","useEffect","Fragment","connect","createStructuredSelector","selectCurrentUser","selectToken","selectFeedPosts","selectHasMore","selectFeedFetching","fetchFeedPostsStart","clearPosts","useScrollPositionThrottled","Feed","UserCard","SmallFooter","MobileHeader","Icon","NewPostButton","SuggestedUsers","HomePage","currentUser","token","feedPosts","hasMore","fetching","document","title","atBottom","length","fontSize","avatar","username","fullName","padding","width","mapStateToProps","mapDispatchToProps","dispatch","authToken","offset"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AAEA,SAASC,iBAAT,EAA4BC,WAA5B,QAA+C,gCAA/C;AACA,SACEC,eADF,EAEEC,aAFF,EAGEC,kBAHF,QAIO,gCAJP;AAKA,SAASC,mBAAT,EAA8BC,UAA9B,QAAgD,8BAAhD;AAEA,OAAOC,0BAAP,MAAuC,wCAAvC;AAEA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,OAAOC,YAAP,MAAyB,mDAAzB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,aAAP,MAA0B,sDAA1B;AACA,OAAOC,cAAP,MAA2B,2DAA3B;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAChBC,EAAAA,WADgB;AAEhBX,EAAAA,mBAFgB;AAGhBC,EAAAA,UAHgB;AAIhBW,EAAAA,KAJgB;AAKhBC,EAAAA,SALgB;AAMhBC,EAAAA,OANgB;AAOhBC,EAAAA;AAPgB,CAAD,KAQX;AACJxB,EAAAA,SAAS,CAAC,MAAM;AACdyB,IAAAA,QAAQ,CAACC,KAAT,GAAkB,YAAlB;AACAjB,IAAAA,mBAAmB,CAACY,KAAD,CAAnB;AACA,WAAO,MAAM;AACXX,MAAAA,UAAU;AACX,KAFD;AAGD,GANQ,EAMN,CAACA,UAAD,EAAaD,mBAAb,EAAkCY,KAAlC,CANM,CAAT;AAQAV,EAAAA,0BAA0B,CACxB,CAAC;AAAEgB,IAAAA;AAAF,GAAD,KAAkB;AAChB,QAAIA,QAAQ,IAAIJ,OAAZ,IAAuB,CAACC,QAA5B,EAAsC;AACpCf,MAAAA,mBAAmB,CAACY,KAAD,EAAQC,SAAS,CAACM,MAAlB,CAAnB;AACD;AACF,GALuB,EAMxB,IANwB,EAOxB,CAACL,OAAD,EAAUC,QAAV,CAPwB,CAA1B;AAUA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAI,IAAA,KAAK,EAAE;AAAEK,MAAAA,QAAQ,EAAE;AAAZ,KAAX;AAAmC,IAAA,SAAS,EAAC,cAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAKE,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF,eAQE;AAAM,iBAAU,WAAhB;AAA4B,IAAA,SAAS,EAAC,gBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACL,QAAD,IAAaF,SAAS,CAACM,MAAV,KAAqB,CAAlC,gBACC,oBAAC,cAAD;AAAgB,IAAA,IAAI,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,gBAGC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAO,IAAA,SAAS,EAAC,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AACE,IAAA,MAAM,EAAER,WAAW,CAACU,MADtB;AAEE,IAAA,QAAQ,EAAEV,WAAW,CAACW,QAFxB;AAGE,IAAA,OAAO,EAAEX,WAAW,CAACY,QAHvB;AAIE,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAJT;AAKE,IAAA,YAAY,MALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE,oBAAC,cAAD;AAAgB,IAAA,GAAG,EAAE,CAArB;AAAwB,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CADF,CAFF,CAJJ,CARF,CADF;AAiCD,CA5DD;;AA8DA,MAAMC,eAAe,GAAGhC,wBAAwB,CAAC;AAC/CiB,EAAAA,WAAW,EAAEhB,iBADkC;AAE/CiB,EAAAA,KAAK,EAAEhB,WAFwC;AAG/CiB,EAAAA,SAAS,EAAEhB,eAHoC;AAI/CiB,EAAAA,OAAO,EAAEhB,aAJsC;AAK/CiB,EAAAA,QAAQ,EAAEhB;AALqC,CAAD,CAAhD;;AAQA,MAAM4B,kBAAkB,GAAIC,QAAD,KAAe;AACxC5B,EAAAA,mBAAmB,EAAE,CAAC6B,SAAD,EAAYC,MAAZ,KACnBF,QAAQ,CAAC5B,mBAAmB,CAAC6B,SAAD,EAAYC,MAAZ,CAApB,CAF8B;AAGxC7B,EAAAA,UAAU,EAAE,MAAM2B,QAAQ,CAAC3B,UAAU,EAAX;AAHc,CAAf,CAA3B;;AAMA,eAAeR,OAAO,CAACiC,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CjB,QAA7C,CAAf","sourcesContent":["import React, { useEffect, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { selectCurrentUser, selectToken } from '../../redux/user/userSelectors';\nimport {\n  selectFeedPosts,\n  selectHasMore,\n  selectFeedFetching,\n} from '../../redux/feed/feedSelectors';\nimport { fetchFeedPostsStart, clearPosts } from '../../redux/feed/feedActions';\n\nimport useScrollPositionThrottled from '../../hooks/useScrollPositionThrottled';\n\nimport Feed from '../../components/Feed/Feed';\nimport UserCard from '../../components/UserCard/UserCard';\nimport SmallFooter from '../../components/Footer/SmallFooter/SmallFooter';\nimport MobileHeader from '../../components/Header/MobileHeader/MobileHeader';\nimport Icon from '../../components/Icon/Icon';\nimport NewPostButton from '../../components/NewPost/NewPostButton/NewPostButton';\nimport SuggestedUsers from '../../components/Suggestion/SuggestedUsers/SuggestedUsers';\n\nconst HomePage = ({\n  currentUser,\n  fetchFeedPostsStart,\n  clearPosts,\n  token,\n  feedPosts,\n  hasMore,\n  fetching,\n}) => {\n  useEffect(() => {\n    document.title = `Instaclone`;\n    fetchFeedPostsStart(token);\n    return () => {\n      clearPosts();\n    };\n  }, [clearPosts, fetchFeedPostsStart, token]);\n\n  useScrollPositionThrottled(\n    ({ atBottom }) => {\n      if (atBottom && hasMore && !fetching) {\n        fetchFeedPostsStart(token, feedPosts.length);\n      }\n    },\n    null,\n    [hasMore, fetching]\n  );\n\n  return (\n    <Fragment>\n      <MobileHeader>\n        <NewPostButton />\n        <h3 style={{ fontSize: '2.5rem' }} className=\"heading-logo\">\n          Instaclone\n        </h3>\n        <Icon icon=\"paper-plane-outline\" />\n      </MobileHeader>\n      <main data-test=\"page-home\" className=\"home-page grid\">\n        {!fetching && feedPosts.length === 0 ? (\n          <SuggestedUsers card />\n        ) : (\n          <Fragment>\n            <Feed />\n            <aside className=\"sidebar\">\n              <div className=\"sidebar__content\">\n                <UserCard\n                  avatar={currentUser.avatar}\n                  username={currentUser.username}\n                  subText={currentUser.fullName}\n                  style={{ padding: '0' }}\n                  avatarMedium\n                />\n                <SuggestedUsers max={5} style={{ width: '100%' }} />\n                <SmallFooter />\n              </div>\n            </aside>\n          </Fragment>\n        )}\n      </main>\n    </Fragment>\n  );\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  token: selectToken,\n  feedPosts: selectFeedPosts,\n  hasMore: selectHasMore,\n  fetching: selectFeedFetching,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchFeedPostsStart: (authToken, offset) =>\n    dispatch(fetchFeedPostsStart(authToken, offset)),\n  clearPosts: () => dispatch(clearPosts()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\n"]},"metadata":{},"sourceType":"module"}